{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/bryanmarin/Desktop/Traffic-Stop-App/trafficstop/src/screens/ForgotPassword.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { PropTypes } from 'prop-types';\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport { Button, Input } from 'react-native-elements';\nimport colors from \"../styles/colors\";\nimport baseStyles from \"./styles/AuthenticationBoilerplate\";\nimport styles from \"./styles/ForgotPassword\";\nimport InputField from \"../common-components/InputField\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as ActionCreators from \"../redux/actions\";\nimport Amplify from '@aws-amplify/core';\nimport { Auth } from 'aws-amplify';\n\nvar ForgotPassword = function (_React$Component) {\n  _inherits(ForgotPassword, _React$Component);\n\n  var _super = _createSuper(ForgotPassword);\n\n  function ForgotPassword(props) {\n    var _this;\n\n    _classCallCheck(this, ForgotPassword);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      emailAddress: '',\n      password: '',\n      badgeNumber: '',\n      username: '',\n      confirmationCode: '',\n      validUsername: false,\n      validBadgenumber: false\n    };\n    _this.handleEmailChange = _this.handleEmailChange.bind(_assertThisInitialized(_this));\n    _this.handleBadgeChange = _this.handleBadgeChange.bind(_assertThisInitialized(_this));\n    _this.handleNextButton = _this.handleNextButton.bind(_assertThisInitialized(_this));\n    _this.onPoliceButton = _this.onPoliceButton.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ForgotPassword, [{\n    key: \"handleSignInButton\",\n    value: function handleSignInButton() {\n      this.props.setLoggedIn(true);\n    }\n  }, {\n    key: \"handleEmailChange\",\n    value: function handleEmailChange(text) {\n      var emailformat = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n      this.setState({\n        emailAddress: text\n      });\n      this.setState({\n        username: text\n      });\n      text.match(emailformat) ? this.setState({\n        validEmail: true\n      }) : this.setState({\n        validEmail: false\n      });\n    }\n  }, {\n    key: \"handleBadgeChange\",\n    value: function handleBadgeChange(text) {\n      text.length >= 4 ? this.setState({\n        validBadgenumber: true\n      }) : this.setState({\n        validBadgenumber: false\n      });\n      this.setState({\n        badgeNumber: text\n      });\n    }\n  }, {\n    key: \"onPoliceButton\",\n    value: function onPoliceButton() {\n      this.props.setUserType('police');\n    }\n  }, {\n    key: \"handleNextButton\",\n    value: function handleNextButton() {\n      this.props.navigation.navigate('NewPassword');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var userType = this.props.userType;\n      var _this$state = this.state,\n          validEmail = _this$state.validEmail,\n          validBadgenumber = _this$state.validBadgenumber;\n      var formValid = userType == 'civilian' ? validEmail : validBadgenumber;\n      return React.createElement(KeyboardAvoidingView, {\n        style: [{\n          backgroundColor: colors.background\n        }, baseStyles.wrapper],\n        behavior: \"padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 7\n        }\n      }, React.createElement(ScrollView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: baseStyles.headerText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }\n      }, \"Forgot your password?\"), React.createElement(Text, {\n        style: styles.forgotPasswordSubheading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }\n      }, \"Enter your \", userType == 'civilian' ? \"email\" : \"badge number\", \" below to reset your password.\"), userType == 'civilian' ? React.createElement(InputField, {\n        labelText: \"Email\",\n        labelTextSize: 14,\n        labelColor: colors.white,\n        textColor: colors.white,\n        borderBottomColor: colors.white,\n        inputType: \"email\",\n        customStyle: {\n          marginBottom: 30\n        },\n        onChangeText: this.handleEmailChange,\n        autoFocus: true,\n        autoCapitalize: \"none\",\n        iconName: \"envelope\",\n        showCheckmark: this.state.validEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 15\n        }\n      }) : React.createElement(InputField, {\n        labelText: \"Badge Number\",\n        labelTextSize: 14,\n        labelColor: colors.white,\n        textColor: colors.white,\n        borderBottomColor: colors.white,\n        inputType: \"number\",\n        customStyle: {\n          marginBottom: 30\n        },\n        onChangeText: this.handleBadgeChange,\n        showCheckmark: this.state.validBadgenumber,\n        autoFocus: true,\n        autoCapitalize: \"none\",\n        iconName: \"envelope\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 15\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: baseStyles.nextButtonSyle,\n        title: \"Sign In\",\n        onPress: this.handleNextButton,\n        disabled: !formValid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: _extends({}, baseStyles.nextButtonText, {\n          color: formValid ? colors.white : colors.secondaryText\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 15\n        }\n      }, \" Next \"), React.createElement(Icon, {\n        name: \"angle-right\",\n        color: formValid ? colors.white : colors.secondaryText,\n        size: 22,\n        style: styles.icon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableHighlight, {\n        style: styles.policeLoginButton,\n        onPress: function onPress() {\n          return _this2.onPoliceButton();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.policeLoginButtonText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }\n      }, \"Police Officer?\"))));\n    }\n  }]);\n\n  return ForgotPassword;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userType: state.userType\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators(ActionCreators, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ForgotPassword);","map":{"version":3,"sources":["/Users/bryanmarin/Desktop/Traffic-Stop-App/trafficstop/src/screens/ForgotPassword.js"],"names":["React","Component","PropTypes","Icon","Button","Input","colors","baseStyles","styles","InputField","connect","bindActionCreators","ActionCreators","Amplify","Auth","ForgotPassword","props","state","emailAddress","password","badgeNumber","username","confirmationCode","validUsername","validBadgenumber","handleEmailChange","bind","handleBadgeChange","handleNextButton","onPoliceButton","setLoggedIn","text","emailformat","setState","match","validEmail","length","setUserType","navigation","navigate","userType","formValid","backgroundColor","background","wrapper","headerText","forgotPasswordSubheading","white","marginBottom","nextButtonSyle","nextButtonText","color","secondaryText","icon","policeLoginButton","policeLoginButtonText","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { PropTypes } from 'prop-types';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport {\n  View,\n  Text,\n  ScrollView,\n  KeyboardAvoidingView,\n  Modal,\n  TouchableOpacity,\n  TouchableHighlight,\n} from 'react-native';\nimport { Button, Input } from 'react-native-elements';\nimport colors from '../styles/colors';\nimport baseStyles from './styles/AuthenticationBoilerplate';\nimport styles from './styles/ForgotPassword';\nimport InputField from '../common-components/InputField';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as ActionCreators from '../redux/actions';\n// import transparentHeaderStyle from '../styles/navigation';\n// import NavBarButton from '../components/buttons/NavBarButton';\n//import Loader from '../components/Loader';\n\n\nimport Amplify from '@aws-amplify/core'\nimport { Auth } from 'aws-amplify';\n//import awsconfig from '../../aws-exports';\n//Amplify.configure(awsconfig);\n\nclass ForgotPassword extends React.Component {\n  // static navigationOptions = ({ navigation }) => ({\n  //   headerTitle: \"\",\n  //   headerRight: () => <NavBarButton\n  //     handleButtonPress={() => navigation.navigate('ForgotPassword')}\n  //     location=\"right\"\n  //     color={colors.white}\n  //     text=\"Forgot Password\"\n  //   />,\n  //   headerLeft: () => <NavBarButton\n  //     handleButtonPress={() => navigation.goBack()}\n  //     location=\"left\"\n  //     icon={<Icon name=\"angle-left\" color={colors.white} size={30} />}\n  //   />,\n  //   headerStyle: transparentHeaderStyle,\n  //   headerTransparent: true,\n  //   headerTintColor: colors.white,\n  // });\n  constructor(props) {\n    super(props);\n    this.state = {\n      emailAddress: '',\n      password: '',\n      badgeNumber: '',\n      username: '',\n      confirmationCode: '',\n      validUsername: false,\n      validBadgenumber: false,\n    };\n\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleBadgeChange = this.handleBadgeChange.bind(this);\n    this.handleNextButton = this.handleNextButton.bind(this);\n    this.onPoliceButton = this.onPoliceButton.bind(this);\n    //this.handleConfirmationCode = this.handleConfirmationCode.bind(this)\n  }\n\n\n  // handleConfirmationCode = () => {\n  //   const { emailAddress, confirmationCode } = this.state;\n  //   this.setState({ emailAddress: emailAddress.toLowerCase() })\n  //   Auth.confirmSignUp(emailAddress, confirmationCode, {})\n  //     .then(() => {\n  //       this.setState({ modalVisible: false });\n  //       this.props.navigation.navigate('Profile')\n  //     })\n  //     .catch(err => console.log(err));\n  // }\n\n  // async SignIn() {\n  //   const { logIn, navigation } = this.props;\n  //   const { navigate } = navigation;\n  //   const { emailAddress, password } = this.state;\n  //   this.setState({ emailAddress: emailAddress.toLowerCase() })\n  //   try {\n  //     const user = await Auth.signIn(emailAddress, password);\n  //     console.log(user)\n  //     if (user.challengeName === 'SMS_MFA' ||\n  //       user.challengeName === 'SOFTWARE_TOKEN_MFA') {\n  //       // You need to get the code from the UI inputs\n  //       // and then trigger the following function with a button click\n  //       //const code = getCodeFromUserInput();\n  //       // If MFA is enabled, sign-in should be confirmed with the confirmation code\n  //       this.setState({ modalVisible: true })\n  //     } else if (user.challengeName === 'NEW_PASSWORD_REQUIRED') {\n  //       // const {requiredAttributes} = user.challengeParam; // the array of required attributes, e.g ['email', 'phone_number']\n  //       // // You need to get the new password and required attributes from the UI inputs\n  //       // // and then trigger the following function with a button click\n  //       // // For example, the email and phone_number are required attributes\n  //       // const {emailAddress, password} = getInfoFromUserInput();\n  //       // const loggedUser = await Auth.completeNewPassword(\n  //       //     emailAddress,              // the Cognito User Object\n  //       //     newPassword,       // the new password\n  //       //     // OPTIONAL, the required attributes\n  //       //     {\n  //       //         name\n  //       //     }\n  //       // );\n  //     } else if (user.challengeName === 'MFA_SETUP') {\n  //       // This happens when the MFA method is TOTP\n  //       // The user needs to setup the TOTP before using it\n  //       // More info please check the Enabling MFA part\n  //       Auth.setupTOTP(user);\n  //     }\n  //     else {\n  //       //Auth.resendSignUp(emailAddress);\n  //       this.setState({ formValid: true, loadingVisible: false });\n  //       this.props.navigation.navigate('Profile');\n  //       // The user directly signs in\n  //       console.log(user);\n\n  //     }\n  //   } catch (err) {\n  //     console.log(err)\n  //     if (err.code === 'UserNotConfirmedException') {\n  //       // The error happens if the user didn't finish the confirmation step when signing up\n  //       // In this case you need to resend the code and confirm the user\n  //       // About how to resend the code and confirm the user, please check the signUp part\n  //       this.setState({ modalVisible: true });\n  //       this.setState({ formValid: false, loadingVisible: false });\n  //     } else if (err.code === 'PasswordResetRequiredException') {\n  //       // The error happens when the password is reset in the Cognito console\n  //       // In this case you need to call forgotPassword to reset the password\n  //       // Please check the Forgot Password part.\n  //       Auth.forgotPassword(emailAddress);\n  //       this.props.navigation.navigate('ForgotPassword');\n  //     } else if (err.code === 'NotAuthorizedException') {\n  //       // The error happens when the incorrect password is provided\n  //       this.setState({ formValid: false, loadingVisible: false });\n  //     } else if (err.code === 'UserNotFoundException') {\n  //       // The error happens when the supplied username/email does not exist in the Cognito user pool\n  //       this.setState({ formValid: false, loadingVisible: false });\n  //     } else {\n  //       this.setState({ formValid: false, loadingVisible: false });\n  //       console.log(err);\n  //     }\n  //   }\n  // }\n\n  handleSignInButton() {\n    //this.setState({ loadingVisible: true });\n    // const { logIn, navigation } = this.props;\n\n    // this.SignIn();\n    // setTimeout(() => {\n    //   const { emailAddress, password } = this.state;\n    //   this.setState({ emailAddress: emailAddress.toLowerCase() })\n    //   this.SignIn\n    // }, 2000);\n    this.props.setLoggedIn(true)\n  }\n\n\n  handleEmailChange(text) {\n    var emailformat = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n    this.setState({ emailAddress: text });\n    this.setState({ username: text });\n    text.match(emailformat) ? this.setState({validEmail: true}): this.setState({validEmail: false});\n  }\n\n\n  handleBadgeChange(text) {\n    text.length>=4 ? this.setState({validBadgenumber: true}) : this.setState({validBadgenumber: false})\n    this.setState({ badgeNumber: text });\n  }\n\n  onPoliceButton() {\n    this.props.setUserType('police')\n  }\n\n  handleNextButton() {\n    this.props.navigation.navigate('NewPassword');\n  }\n\n  render() {\n    const userType = this.props.userType;\n    const {validEmail, validBadgenumber} = this.state\n    const formValid = userType == 'civilian' ? validEmail : validBadgenumber\n    return (\n      <KeyboardAvoidingView\n        style={[{ backgroundColor: colors.background }, baseStyles.wrapper]}\n        behavior=\"padding\"\n      >\n          <ScrollView>\n            <Text style={baseStyles.headerText}>\n              Forgot your password?\n            </Text>\n            <Text style={styles.forgotPasswordSubheading}>\n              Enter your {userType == 'civilian' ? \"email\" : \"badge number\"} below to reset your password.\n                </Text>\n            { userType == 'civilian'\n            ? <InputField\n                labelText=\"Email\"\n                labelTextSize={14}\n                labelColor={colors.white}\n                textColor={colors.white}\n                borderBottomColor={colors.white}\n                inputType=\"email\"\n                customStyle={{ marginBottom: 30 }}\n                onChangeText={this.handleEmailChange}\n                autoFocus\n                autoCapitalize={\"none\"}\n                iconName=\"envelope\"\n                showCheckmark = {this.state.validEmail}\n              />\n            : <InputField\n                labelText=\"Badge Number\"\n                labelTextSize={14}\n                labelColor={colors.white}\n                textColor={colors.white}\n                borderBottomColor={colors.white}\n                inputType=\"number\"\n                customStyle={{ marginBottom: 30 }}\n                onChangeText={this.handleBadgeChange}\n                showCheckmark = {this.state.validBadgenumber}\n                autoFocus\n                autoCapitalize={\"none\"}\n                iconName=\"envelope\"\n              />\n            }\n            <TouchableOpacity \n              style = {baseStyles.nextButtonSyle}\n              title = {\"Sign In\"}\n              onPress = {this.handleNextButton}\n              disabled = {!formValid}\n              >\n              <Text style= {\n                Object.assign({},\n                  baseStyles.nextButtonText, \n                  {color: formValid? colors.white : colors.secondaryText})}\n                > Next </Text>\n              <Icon\n              name=\"angle-right\"\n              color={formValid? colors.white: colors.secondaryText}\n              size={22}\n              style={styles.icon}\n              />\n            </TouchableOpacity>\n            <TouchableHighlight\n            style={styles.policeLoginButton}\n            onPress= {() => this.onPoliceButton()}\n          >\n            <Text style={styles.policeLoginButtonText}>\n              Police Officer?\n            </Text>\n          </TouchableHighlight>\n          </ScrollView>\n      </KeyboardAvoidingView>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    userType: state.userType,\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(ActionCreators, dispatch);\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ForgotPassword);\n"]},"metadata":{},"sourceType":"module"}